var d=Object.defineProperty;var c=(n,t,e)=>t in n?d(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var s=(n,t,e)=>(c(n,typeof t!="symbol"?t+"":t,e),e);import{D as l,j as p,k as u,l as o,R as x,m as y,L as C}from"./elements.87f68392.js";class g{constructor(t){s(this,"stage");s(this,"renderer");const e={width:l,height:p,antialias:!0,backgroundAlpha:0,clearBeforeRender:!0,preserveDrawingBuffer:!0,...t};this.renderer=u(e),this.stage=new o}destroy(){var i,r;this.stage.destroy({children:!0,texture:!0,baseTexture:!0}),this.stage=null;const t=this.renderer.type,e=this.renderer instanceof x?(i=this.renderer)==null?void 0:i.gl:void 0;t===y.WEBGL&&e&&((r=e==null?void 0:e.getExtension("WEBGL_lose_context"))==null||r.loseContext()),this.renderer.destroy(!0),this.renderer=null}get view(){return this.renderer.view}render(){this.renderer.render(this.stage)}}class R extends C{constructor(e,i,r){super(i,r);s(this,"pixiViewContainer");s(this,"ctx");s(this,"container");this.ctx=e,this.container=new o,this.ctx.stage.addChild(this.container)}render(){this.ctx.render()}addChild(e){this.container.addChild(e)}clearLayer(){this.container.removeChildren().forEach(i=>{i.destroy()})}onMount(e){super.onMount(e),this.pixiViewContainer=this.element.querySelector("#webgl-layer"),this.pixiViewContainer||(this.pixiViewContainer=document.createElement("div"),this.pixiViewContainer.setAttribute("id",`${this.id}`),this.pixiViewContainer.setAttribute("class","webgl-layer"),this.pixiViewContainer.appendChild(this.ctx.view),this.element.appendChild(this.pixiViewContainer),this.updateStyle())}onUnmount(e){super.onUnmount(e),this.clearLayer(),this.ctx.stage.removeChild(this.container),this.container.destroy(),this.pixiViewContainer.remove(),this.pixiViewContainer=void 0}onResize(e){super.onResize(e),this.ctx.renderer.resize(e.width,e.height)}onRescale(e){super.onRescale(e);const i=e.xBounds[0]>e.xBounds[1],r=e.yBounds[0]>e.yBounds[1];this.setContainerPosition(e.xScale(0),e.yScale(0)),this.setContainerScale(e.xRatio*(i?-1:1),e.yRatio*(r?-1:1))}setContainerPosition(e,i){this.container.position.set(e,i)}setContainerScale(e,i){this.container.scale.set(e,i)}updateStyle(e){const i=e||this.isVisible,r=this.interactive?"auto":"none";this.container.visible=i;const a=[["position","absolute"],["pointer-events",`${r}`],["z-index",`${this.order}`],["opacity",`${this.opacity}`]].map(h=>h.join(":")).join(";");this.pixiViewContainer.setAttribute("style",a)}setVisibility(e,i){super.setVisibility(e,i),this.pixiViewContainer&&this.updateStyle(e)}onOpacityChanged(e){this.pixiViewContainer&&this.updateStyle()}onOrderChanged(e){this.pixiViewContainer&&this.updateStyle()}onInteractivityChanged(e){this.pixiViewContainer&&this.updateStyle()}renderType(){return this.ctx.renderer.type}}export{g as P,R as a};
//# sourceMappingURL=PixiLayer.a52855e3.js.map
