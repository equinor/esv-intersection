{"version":3,"file":"WellborePathLayer.e026dac6.js","sources":["../../../../src/layers/base/SVGLayer.ts","../../../../node_modules/d3-path/src/path.js","../../../../node_modules/d3-shape/src/constant.js","../../../../node_modules/d3-shape/src/math.js","../../../../node_modules/d3-shape/src/array.js","../../../../node_modules/d3-shape/src/curve/linear.js","../../../../node_modules/d3-shape/src/point.js","../../../../node_modules/d3-shape/src/line.js","../../../../node_modules/d3-shape/src/noop.js","../../../../node_modules/d3-shape/src/curve/basis.js","../../../../node_modules/d3-shape/src/curve/basisClosed.js","../../../../node_modules/d3-shape/src/curve/bundle.js","../../../../node_modules/d3-shape/src/curve/cardinal.js","../../../../node_modules/d3-shape/src/curve/catmullRom.js","../../../../node_modules/d3-shape/src/curve/monotone.js","../../../../node_modules/d3-shape/src/curve/natural.js","../../../../node_modules/d3-shape/src/curve/step.js","../../../../src/layers/WellborePathLayer.ts"],"sourcesContent":["import { select, Selection } from 'd3-selection';\nimport { Layer } from './Layer';\nimport { OnMountEvent, OnResizeEvent } from '../../interfaces';\nimport { DEFAULT_LAYER_HEIGHT, DEFAULT_LAYER_WIDTH } from '../../constants';\n\nexport abstract class SVGLayer<T> extends Layer<T> {\n  elm: Selection<SVGElement, unknown, null, undefined>;\n\n  onMount(event: OnMountEvent): void {\n    super.onMount(event);\n    const { elm } = event;\n    const width = event.width || parseInt(elm.getAttribute('width'), 10) || DEFAULT_LAYER_WIDTH;\n    const height = event.height || parseInt(elm.getAttribute('height'), 10) || DEFAULT_LAYER_HEIGHT;\n    if (!this.elm) {\n      this.elm = select(elm).append('svg');\n      this.elm.attr('id', `${this.id}`);\n      this.elm.attr('class', 'svg-layer');\n    }\n    this.elm.attr('height', height).attr('width', width);\n    const interactive = this.interactive ? 'auto' : 'none';\n    this.elm.style('position', 'absolute').style('pointer-events', interactive).style('opacity', this.opacity).style('z-index', this.order);\n  }\n\n  onUnmount(): void {\n    super.onUnmount();\n    this.elm.remove();\n    this.elm = null;\n  }\n\n  onResize(event: OnResizeEvent): void {\n    if (!this.elm) {\n      return;\n    }\n    super.onResize(event);\n    this.elm.attr('height', event.height).attr('width', event.width);\n  }\n\n  setVisibility(visible: boolean): void {\n    super.setVisibility(visible);\n    if (this.elm) {\n      this.elm.attr('visibility', visible ? 'visible' : 'hidden');\n    }\n  }\n\n  onOpacityChanged(opacity: number): void {\n    if (this.elm) {\n      this.elm.style('opacity', opacity);\n    }\n  }\n\n  onOrderChanged(order: number): void {\n    if (this.elm) {\n      this.elm.style('z-index', order);\n    }\n  }\n\n  onInteractivityChanged(shouldBeInteractive: boolean): void {\n    if (this.elm) {\n      const interactive = shouldBeInteractive ? 'auto' : 'none';\n      this.elm.style('pointer-events', interactive);\n    }\n  }\n}\n","var pi = Math.PI,\n    tau = 2 * pi,\n    epsilon = 1e-6,\n    tauEpsilon = tau - epsilon;\n\nfunction Path() {\n  this._x0 = this._y0 = // start of current subpath\n  this._x1 = this._y1 = null; // end of current subpath\n  this._ = \"\";\n}\n\nfunction path() {\n  return new Path;\n}\n\nPath.prototype = path.prototype = {\n  constructor: Path,\n  moveTo: function(x, y) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y);\n  },\n  closePath: function() {\n    if (this._x1 !== null) {\n      this._x1 = this._x0, this._y1 = this._y0;\n      this._ += \"Z\";\n    }\n  },\n  lineTo: function(x, y) {\n    this._ += \"L\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  quadraticCurveTo: function(x1, y1, x, y) {\n    this._ += \"Q\" + (+x1) + \",\" + (+y1) + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  bezierCurveTo: function(x1, y1, x2, y2, x, y) {\n    this._ += \"C\" + (+x1) + \",\" + (+y1) + \",\" + (+x2) + \",\" + (+y2) + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  arcTo: function(x1, y1, x2, y2, r) {\n    x1 = +x1, y1 = +y1, x2 = +x2, y2 = +y2, r = +r;\n    var x0 = this._x1,\n        y0 = this._y1,\n        x21 = x2 - x1,\n        y21 = y2 - y1,\n        x01 = x0 - x1,\n        y01 = y0 - y1,\n        l01_2 = x01 * x01 + y01 * y01;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(\"negative radius: \" + r);\n\n    // Is this path empty? Move to (x1,y1).\n    if (this._x1 === null) {\n      this._ += \"M\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    }\n\n    // Or, is (x1,y1) coincident with (x0,y0)? Do nothing.\n    else if (!(l01_2 > epsilon));\n\n    // Or, are (x0,y0), (x1,y1) and (x2,y2) collinear?\n    // Equivalently, is (x1,y1) coincident with (x2,y2)?\n    // Or, is the radius zero? Line to (x1,y1).\n    else if (!(Math.abs(y01 * x21 - y21 * x01) > epsilon) || !r) {\n      this._ += \"L\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    }\n\n    // Otherwise, draw an arc!\n    else {\n      var x20 = x2 - x0,\n          y20 = y2 - y0,\n          l21_2 = x21 * x21 + y21 * y21,\n          l20_2 = x20 * x20 + y20 * y20,\n          l21 = Math.sqrt(l21_2),\n          l01 = Math.sqrt(l01_2),\n          l = r * Math.tan((pi - Math.acos((l21_2 + l01_2 - l20_2) / (2 * l21 * l01))) / 2),\n          t01 = l / l01,\n          t21 = l / l21;\n\n      // If the start tangent is not coincident with (x0,y0), line to.\n      if (Math.abs(t01 - 1) > epsilon) {\n        this._ += \"L\" + (x1 + t01 * x01) + \",\" + (y1 + t01 * y01);\n      }\n\n      this._ += \"A\" + r + \",\" + r + \",0,0,\" + (+(y01 * x20 > x01 * y20)) + \",\" + (this._x1 = x1 + t21 * x21) + \",\" + (this._y1 = y1 + t21 * y21);\n    }\n  },\n  arc: function(x, y, r, a0, a1, ccw) {\n    x = +x, y = +y, r = +r, ccw = !!ccw;\n    var dx = r * Math.cos(a0),\n        dy = r * Math.sin(a0),\n        x0 = x + dx,\n        y0 = y + dy,\n        cw = 1 ^ ccw,\n        da = ccw ? a0 - a1 : a1 - a0;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(\"negative radius: \" + r);\n\n    // Is this path empty? Move to (x0,y0).\n    if (this._x1 === null) {\n      this._ += \"M\" + x0 + \",\" + y0;\n    }\n\n    // Or, is (x0,y0) not coincident with the previous point? Line to (x0,y0).\n    else if (Math.abs(this._x1 - x0) > epsilon || Math.abs(this._y1 - y0) > epsilon) {\n      this._ += \"L\" + x0 + \",\" + y0;\n    }\n\n    // Is this arc empty? Weâ€™re done.\n    if (!r) return;\n\n    // Does the angle go the wrong way? Flip the direction.\n    if (da < 0) da = da % tau + tau;\n\n    // Is this a complete circle? Draw two arcs to complete the circle.\n    if (da > tauEpsilon) {\n      this._ += \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (x - dx) + \",\" + (y - dy) + \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (this._x1 = x0) + \",\" + (this._y1 = y0);\n    }\n\n    // Is this arc non-empty? Draw an arc!\n    else if (da > epsilon) {\n      this._ += \"A\" + r + \",\" + r + \",0,\" + (+(da >= pi)) + \",\" + cw + \",\" + (this._x1 = x + r * Math.cos(a1)) + \",\" + (this._y1 = y + r * Math.sin(a1));\n    }\n  },\n  rect: function(x, y, w, h) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y) + \"h\" + (+w) + \"v\" + (+h) + \"h\" + (-w) + \"Z\";\n  },\n  toString: function() {\n    return this._;\n  }\n};\n\nexport default path;\n","export default function(x) {\n  return function constant() {\n    return x;\n  };\n}\n","export const abs = Math.abs;\nexport const atan2 = Math.atan2;\nexport const cos = Math.cos;\nexport const max = Math.max;\nexport const min = Math.min;\nexport const sin = Math.sin;\nexport const sqrt = Math.sqrt;\n\nexport const epsilon = 1e-12;\nexport const pi = Math.PI;\nexport const halfPi = pi / 2;\nexport const tau = 2 * pi;\n\nexport function acos(x) {\n  return x > 1 ? 0 : x < -1 ? pi : Math.acos(x);\n}\n\nexport function asin(x) {\n  return x >= 1 ? halfPi : x <= -1 ? -halfPi : Math.asin(x);\n}\n","export var slice = Array.prototype.slice;\n\nexport default function(x) {\n  return typeof x === \"object\" && \"length\" in x\n    ? x // Array, TypedArray, NodeList, array-like\n    : Array.from(x); // Map, Set, iterable, string, or anything else\n}\n","function Linear(context) {\n  this._context = context;\n}\n\nLinear.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; // falls through\n      default: this._context.lineTo(x, y); break;\n    }\n  }\n};\n\nexport default function(context) {\n  return new Linear(context);\n}\n","export function x(p) {\n  return p[0];\n}\n\nexport function y(p) {\n  return p[1];\n}\n","import {path} from \"d3-path\";\nimport array from \"./array.js\";\nimport constant from \"./constant.js\";\nimport curveLinear from \"./curve/linear.js\";\nimport {x as pointX, y as pointY} from \"./point.js\";\n\nexport default function(x, y) {\n  var defined = constant(true),\n      context = null,\n      curve = curveLinear,\n      output = null;\n\n  x = typeof x === \"function\" ? x : (x === undefined) ? pointX : constant(x);\n  y = typeof y === \"function\" ? y : (y === undefined) ? pointY : constant(y);\n\n  function line(data) {\n    var i,\n        n = (data = array(data)).length,\n        d,\n        defined0 = false,\n        buffer;\n\n    if (context == null) output = curve(buffer = path());\n\n    for (i = 0; i <= n; ++i) {\n      if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n        if (defined0 = !defined0) output.lineStart();\n        else output.lineEnd();\n      }\n      if (defined0) output.point(+x(d, i, data), +y(d, i, data));\n    }\n\n    if (buffer) return output = null, buffer + \"\" || null;\n  }\n\n  line.x = function(_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), line) : x;\n  };\n\n  line.y = function(_) {\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), line) : y;\n  };\n\n  line.defined = function(_) {\n    return arguments.length ? (defined = typeof _ === \"function\" ? _ : constant(!!_), line) : defined;\n  };\n\n  line.curve = function(_) {\n    return arguments.length ? (curve = _, context != null && (output = curve(context)), line) : curve;\n  };\n\n  line.context = function(_) {\n    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), line) : context;\n  };\n\n  return line;\n}\n","export default function() {}\n","export function point(that, x, y) {\n  that._context.bezierCurveTo(\n    (2 * that._x0 + that._x1) / 3,\n    (2 * that._y0 + that._y1) / 3,\n    (that._x0 + 2 * that._x1) / 3,\n    (that._y0 + 2 * that._y1) / 3,\n    (that._x0 + 4 * that._x1 + x) / 6,\n    (that._y0 + 4 * that._y1 + y) / 6\n  );\n}\n\nexport function Basis(context) {\n  this._context = context;\n}\n\nBasis.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 =\n    this._y0 = this._y1 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 3: point(this, this._x1, this._y1); // falls through\n      case 2: this._context.lineTo(this._x1, this._y1); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; this._context.lineTo((5 * this._x0 + this._x1) / 6, (5 * this._y0 + this._y1) / 6); // falls through\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n  }\n};\n\nexport default function(context) {\n  return new Basis(context);\n}\n","import noop from \"../noop.js\";\nimport {point} from \"./basis.js\";\n\nfunction BasisClosed(context) {\n  this._context = context;\n}\n\nBasisClosed.prototype = {\n  areaStart: noop,\n  areaEnd: noop,\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 = this._x3 = this._x4 =\n    this._y0 = this._y1 = this._y2 = this._y3 = this._y4 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 1: {\n        this._context.moveTo(this._x2, this._y2);\n        this._context.closePath();\n        break;\n      }\n      case 2: {\n        this._context.moveTo((this._x2 + 2 * this._x3) / 3, (this._y2 + 2 * this._y3) / 3);\n        this._context.lineTo((this._x3 + 2 * this._x2) / 3, (this._y3 + 2 * this._y2) / 3);\n        this._context.closePath();\n        break;\n      }\n      case 3: {\n        this.point(this._x2, this._y2);\n        this.point(this._x3, this._y3);\n        this.point(this._x4, this._y4);\n        break;\n      }\n    }\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._x2 = x, this._y2 = y; break;\n      case 1: this._point = 2; this._x3 = x, this._y3 = y; break;\n      case 2: this._point = 3; this._x4 = x, this._y4 = y; this._context.moveTo((this._x0 + 4 * this._x1 + x) / 6, (this._y0 + 4 * this._y1 + y) / 6); break;\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n  }\n};\n\nexport default function(context) {\n  return new BasisClosed(context);\n}\n","import {Basis} from \"./basis.js\";\n\nfunction Bundle(context, beta) {\n  this._basis = new Basis(context);\n  this._beta = beta;\n}\n\nBundle.prototype = {\n  lineStart: function() {\n    this._x = [];\n    this._y = [];\n    this._basis.lineStart();\n  },\n  lineEnd: function() {\n    var x = this._x,\n        y = this._y,\n        j = x.length - 1;\n\n    if (j > 0) {\n      var x0 = x[0],\n          y0 = y[0],\n          dx = x[j] - x0,\n          dy = y[j] - y0,\n          i = -1,\n          t;\n\n      while (++i <= j) {\n        t = i / j;\n        this._basis.point(\n          this._beta * x[i] + (1 - this._beta) * (x0 + t * dx),\n          this._beta * y[i] + (1 - this._beta) * (y0 + t * dy)\n        );\n      }\n    }\n\n    this._x = this._y = null;\n    this._basis.lineEnd();\n  },\n  point: function(x, y) {\n    this._x.push(+x);\n    this._y.push(+y);\n  }\n};\n\nexport default (function custom(beta) {\n\n  function bundle(context) {\n    return beta === 1 ? new Basis(context) : new Bundle(context, beta);\n  }\n\n  bundle.beta = function(beta) {\n    return custom(+beta);\n  };\n\n  return bundle;\n})(0.85);\n","export function point(that, x, y) {\n  that._context.bezierCurveTo(\n    that._x1 + that._k * (that._x2 - that._x0),\n    that._y1 + that._k * (that._y2 - that._y0),\n    that._x2 + that._k * (that._x1 - x),\n    that._y2 + that._k * (that._y1 - y),\n    that._x2,\n    that._y2\n  );\n}\n\nexport function Cardinal(context, tension) {\n  this._context = context;\n  this._k = (1 - tension) / 6;\n}\n\nCardinal.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x2, this._y2); break;\n      case 3: point(this, this._x1, this._y1); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; this._x1 = x, this._y1 = y; break;\n      case 2: this._point = 3; // falls through\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(tension) {\n\n  function cardinal(context) {\n    return new Cardinal(context, tension);\n  }\n\n  cardinal.tension = function(tension) {\n    return custom(+tension);\n  };\n\n  return cardinal;\n})(0);\n","import {epsilon} from \"../math.js\";\nimport {Cardinal} from \"./cardinal.js\";\n\nexport function point(that, x, y) {\n  var x1 = that._x1,\n      y1 = that._y1,\n      x2 = that._x2,\n      y2 = that._y2;\n\n  if (that._l01_a > epsilon) {\n    var a = 2 * that._l01_2a + 3 * that._l01_a * that._l12_a + that._l12_2a,\n        n = 3 * that._l01_a * (that._l01_a + that._l12_a);\n    x1 = (x1 * a - that._x0 * that._l12_2a + that._x2 * that._l01_2a) / n;\n    y1 = (y1 * a - that._y0 * that._l12_2a + that._y2 * that._l01_2a) / n;\n  }\n\n  if (that._l23_a > epsilon) {\n    var b = 2 * that._l23_2a + 3 * that._l23_a * that._l12_a + that._l12_2a,\n        m = 3 * that._l23_a * (that._l23_a + that._l12_a);\n    x2 = (x2 * b + that._x1 * that._l23_2a - x * that._l12_2a) / m;\n    y2 = (y2 * b + that._y1 * that._l23_2a - y * that._l12_2a) / m;\n  }\n\n  that._context.bezierCurveTo(x1, y1, x2, y2, that._x2, that._y2);\n}\n\nfunction CatmullRom(context, alpha) {\n  this._context = context;\n  this._alpha = alpha;\n}\n\nCatmullRom.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._l01_a = this._l12_a = this._l23_a =\n    this._l01_2a = this._l12_2a = this._l23_2a =\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x2, this._y2); break;\n      case 3: this.point(this._x2, this._y2); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n\n    if (this._point) {\n      var x23 = this._x2 - x,\n          y23 = this._y2 - y;\n      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));\n    }\n\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; // falls through\n      default: point(this, x, y); break;\n    }\n\n    this._l01_a = this._l12_a, this._l12_a = this._l23_a;\n    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(alpha) {\n\n  function catmullRom(context) {\n    return alpha ? new CatmullRom(context, alpha) : new Cardinal(context, 0);\n  }\n\n  catmullRom.alpha = function(alpha) {\n    return custom(+alpha);\n  };\n\n  return catmullRom;\n})(0.5);\n","function sign(x) {\n  return x < 0 ? -1 : 1;\n}\n\n// Calculate the slopes of the tangents (Hermite-type interpolation) based on\n// the following paper: Steffen, M. 1990. A Simple Method for Monotonic\n// Interpolation in One Dimension. Astronomy and Astrophysics, Vol. 239, NO.\n// NOV(II), P. 443, 1990.\nfunction slope3(that, x2, y2) {\n  var h0 = that._x1 - that._x0,\n      h1 = x2 - that._x1,\n      s0 = (that._y1 - that._y0) / (h0 || h1 < 0 && -0),\n      s1 = (y2 - that._y1) / (h1 || h0 < 0 && -0),\n      p = (s0 * h1 + s1 * h0) / (h0 + h1);\n  return (sign(s0) + sign(s1)) * Math.min(Math.abs(s0), Math.abs(s1), 0.5 * Math.abs(p)) || 0;\n}\n\n// Calculate a one-sided slope.\nfunction slope2(that, t) {\n  var h = that._x1 - that._x0;\n  return h ? (3 * (that._y1 - that._y0) / h - t) / 2 : t;\n}\n\n// According to https://en.wikipedia.org/wiki/Cubic_Hermite_spline#Representations\n// \"you can express cubic Hermite interpolation in terms of cubic BÃ©zier curves\n// with respect to the four values p0, p0 + m0 / 3, p1 - m1 / 3, p1\".\nfunction point(that, t0, t1) {\n  var x0 = that._x0,\n      y0 = that._y0,\n      x1 = that._x1,\n      y1 = that._y1,\n      dx = (x1 - x0) / 3;\n  that._context.bezierCurveTo(x0 + dx, y0 + dx * t0, x1 - dx, y1 - dx * t1, x1, y1);\n}\n\nfunction MonotoneX(context) {\n  this._context = context;\n}\n\nMonotoneX.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 =\n    this._y0 = this._y1 =\n    this._t0 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x1, this._y1); break;\n      case 3: point(this, this._t0, slope2(this, this._t0)); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    var t1 = NaN;\n\n    x = +x, y = +y;\n    if (x === this._x1 && y === this._y1) return; // Ignore coincident points.\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; point(this, slope2(this, t1 = slope3(this, x, y)), t1); break;\n      default: point(this, this._t0, t1 = slope3(this, x, y)); break;\n    }\n\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n    this._t0 = t1;\n  }\n}\n\nfunction MonotoneY(context) {\n  this._context = new ReflectContext(context);\n}\n\n(MonotoneY.prototype = Object.create(MonotoneX.prototype)).point = function(x, y) {\n  MonotoneX.prototype.point.call(this, y, x);\n};\n\nfunction ReflectContext(context) {\n  this._context = context;\n}\n\nReflectContext.prototype = {\n  moveTo: function(x, y) { this._context.moveTo(y, x); },\n  closePath: function() { this._context.closePath(); },\n  lineTo: function(x, y) { this._context.lineTo(y, x); },\n  bezierCurveTo: function(x1, y1, x2, y2, x, y) { this._context.bezierCurveTo(y1, x1, y2, x2, y, x); }\n};\n\nexport function monotoneX(context) {\n  return new MonotoneX(context);\n}\n\nexport function monotoneY(context) {\n  return new MonotoneY(context);\n}\n","function Natural(context) {\n  this._context = context;\n}\n\nNatural.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x = [];\n    this._y = [];\n  },\n  lineEnd: function() {\n    var x = this._x,\n        y = this._y,\n        n = x.length;\n\n    if (n) {\n      this._line ? this._context.lineTo(x[0], y[0]) : this._context.moveTo(x[0], y[0]);\n      if (n === 2) {\n        this._context.lineTo(x[1], y[1]);\n      } else {\n        var px = controlPoints(x),\n            py = controlPoints(y);\n        for (var i0 = 0, i1 = 1; i1 < n; ++i0, ++i1) {\n          this._context.bezierCurveTo(px[0][i0], py[0][i0], px[1][i0], py[1][i0], x[i1], y[i1]);\n        }\n      }\n    }\n\n    if (this._line || (this._line !== 0 && n === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n    this._x = this._y = null;\n  },\n  point: function(x, y) {\n    this._x.push(+x);\n    this._y.push(+y);\n  }\n};\n\n// See https://www.particleincell.com/2012/bezier-splines/ for derivation.\nfunction controlPoints(x) {\n  var i,\n      n = x.length - 1,\n      m,\n      a = new Array(n),\n      b = new Array(n),\n      r = new Array(n);\n  a[0] = 0, b[0] = 2, r[0] = x[0] + 2 * x[1];\n  for (i = 1; i < n - 1; ++i) a[i] = 1, b[i] = 4, r[i] = 4 * x[i] + 2 * x[i + 1];\n  a[n - 1] = 2, b[n - 1] = 7, r[n - 1] = 8 * x[n - 1] + x[n];\n  for (i = 1; i < n; ++i) m = a[i] / b[i - 1], b[i] -= m, r[i] -= m * r[i - 1];\n  a[n - 1] = r[n - 1] / b[n - 1];\n  for (i = n - 2; i >= 0; --i) a[i] = (r[i] - a[i + 1]) / b[i];\n  b[n - 1] = (x[n] + a[n - 1]) / 2;\n  for (i = 0; i < n - 1; ++i) b[i] = 2 * x[i + 1] - a[i + 1];\n  return [a, b];\n}\n\nexport default function(context) {\n  return new Natural(context);\n}\n","function Step(context, t) {\n  this._context = context;\n  this._t = t;\n}\n\nStep.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x = this._y = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (0 < this._t && this._t < 1 && this._point === 2) this._context.lineTo(this._x, this._y);\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    if (this._line >= 0) this._t = 1 - this._t, this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; // falls through\n      default: {\n        if (this._t <= 0) {\n          this._context.lineTo(this._x, y);\n          this._context.lineTo(x, y);\n        } else {\n          var x1 = this._x * (1 - this._t) + x * this._t;\n          this._context.lineTo(x1, this._y);\n          this._context.lineTo(x1, y);\n        }\n        break;\n      }\n    }\n    this._x = x, this._y = y;\n  }\n};\n\nexport default function(context) {\n  return new Step(context, 0.5);\n}\n\nexport function stepBefore(context) {\n  return new Step(context, 0);\n}\n\nexport function stepAfter(context) {\n  return new Step(context, 1);\n}\n","import {\n  line,\n  curveCatmullRom,\n  curveLinear,\n  curveBasis,\n  curveBasisClosed,\n  curveBundle,\n  curveCardinal,\n  curveMonotoneX,\n  curveMonotoneY,\n  curveNatural,\n  curveStep,\n  curveStepAfter,\n  curveStepBefore,\n} from 'd3-shape';\nimport { SVGLayer } from './base/SVGLayer';\nimport { OnUpdateEvent, OnRescaleEvent } from '../interfaces';\nimport { LayerOptions } from '..';\n\nconst CURVE_CATMULL_ROM_ALPHA = 0.7;\nconst CURVE_CARDINAL_TENSION = 0.9;\nconst CURVE_BUNDLE_BETA = 1.0;\n\nexport interface WellborepathLayerOptions<T extends [number, number][]> extends LayerOptions<T> {\n  stroke: string;\n  strokeWidth: string;\n  curveType?: string;\n  tension?: number;\n}\n\nexport class WellborepathLayer<T extends [number, number][]> extends SVGLayer<T> {\n  rescaleEvent: OnRescaleEvent;\n\n  constructor(id?: string, options?: WellborepathLayerOptions<T>) {\n    super(id, options);\n    this.options = {\n      ...this.options,\n      ...options,\n    };\n    this.render = this.render.bind(this);\n  }\n\n  onUpdate(event: OnUpdateEvent<T>): void {\n    super.onUpdate(event);\n    this.render();\n  }\n\n  onRescale(event: OnRescaleEvent): void {\n    super.onRescale(event);\n    if (!this.elm) {\n      return;\n    }\n    this.rescaleEvent = event;\n    this.render();\n  }\n\n  render(): void {\n    const { strokeWidth, stroke } = this.options as WellborepathLayerOptions<T>;\n\n    if (!this.elm) {\n      return;\n    }\n    this.elm.select('g').remove();\n\n    const data = this.data || (this.referenceSystem && (this.referenceSystem.projectedPath as [number, number][]));\n    if (!data || !this.rescaleEvent) {\n      return;\n    }\n\n    this.elm\n      .append('g')\n      .attr('class', 'well-path')\n      .append('path')\n      .attr('d', this.renderWellborePath(data))\n      .attr('stroke-width', strokeWidth || '2px')\n      .attr('stroke', stroke || 'red')\n      .attr('fill', 'none');\n  }\n\n  private renderWellborePath(data: [number, number][]): string {\n    const { xScale, yScale } = this.rescaleEvent;\n    const transformedData: [number, number][] = data.map((d) => [xScale(d[0]), yScale(d[1])]);\n\n    // TODO: Might be a good idea to move something like this to a shared function in a base class\n    let curveFactory;\n    const { curveType, tension } = this.options as WellborepathLayerOptions<T>;\n    switch (curveType) {\n      default:\n      case 'curveCatmullRom':\n        curveFactory = curveCatmullRom.alpha(tension || CURVE_CATMULL_ROM_ALPHA);\n        break;\n      case 'curveLinear':\n        curveFactory = curveLinear;\n        break;\n      case 'curveBasis':\n        curveFactory = curveBasis;\n        break;\n      case 'curveBasisClosed':\n        curveFactory = curveBasisClosed;\n        break;\n      case 'curveBundle':\n        curveFactory = curveBundle.beta(tension || CURVE_BUNDLE_BETA);\n        break;\n      case 'curveCardinal':\n        curveFactory = curveCardinal.tension(tension || CURVE_CARDINAL_TENSION);\n        break;\n      case 'curveMonotoneX':\n        curveFactory = curveMonotoneX;\n        break;\n      case 'curveMonotoneY':\n        curveFactory = curveMonotoneY;\n        break;\n      case 'curveNatural':\n        curveFactory = curveNatural;\n        break;\n      case 'curveStep':\n        curveFactory = curveStep;\n        break;\n      case 'curveStepAfter':\n        curveFactory = curveStepAfter;\n        break;\n      case 'curveStepBefore':\n        curveFactory = curveStepBefore;\n        break;\n    }\n\n    return line().curve(curveFactory)(transformedData);\n  }\n}\n"],"names":["SVGLayer","Layer","__publicField","event","elm","width","DEFAULT_LAYER_WIDTH","height","DEFAULT_LAYER_HEIGHT","select","interactive","visible","opacity","order","shouldBeInteractive","pi","tau","epsilon","tauEpsilon","Path","path","x","y","x1","y1","x2","y2","r","x0","y0","x21","y21","x01","y01","l01_2","x20","y20","l21_2","l20_2","l21","l01","l","t01","t21","a0","a1","ccw","dx","dy","cw","da","w","h","constant","array","Linear","context","curveLinear","p","line","defined","curve","output","pointX","pointY","data","i","n","d","defined0","buffer","_","noop","point","that","Basis","curveBasis","BasisClosed","curveBasisClosed","Bundle","beta","j","t","curveBundle","custom","bundle","Cardinal","tension","curveCardinal","cardinal","a","b","m","CatmullRom","alpha","x23","y23","curveCatmullRom","catmullRom","sign","slope3","h0","h1","s0","s1","slope2","t0","t1","MonotoneX","MonotoneY","ReflectContext","monotoneX","monotoneY","Natural","px","controlPoints","py","i0","i1","curveNatural","Step","curveStep","stepBefore","stepAfter","CURVE_CATMULL_ROM_ALPHA","CURVE_CARDINAL_TENSION","CURVE_BUNDLE_BETA","WellborepathLayer","id","options","strokeWidth","stroke","xScale","yScale","transformedData","curveFactory","curveType","curveMonotoneX","curveMonotoneY","curveStepAfter","curveStepBefore"],"mappings":"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"}