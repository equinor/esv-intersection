import{I as E,C as ze}from"./MainController-99ef3014.js";import{C as Be,a as Ne,c as Ge,b as u,d as Ve,g as Te,P as H,S as Ze,e as Re,f as g}from"./elements-bce68b8a.js";import{c as Fe,t as Ee,g as He,C as Oe}from"./picks-0e49159a.js";import{G as Ue,a as Ye}from"./GeomodelLayerV2-8914a018.js";import{G as Qe}from"./GridLayer-02f0a062.js";import{g as Xe,S as Je,a as Ke,b as $e,s as qe}from"./seismic-colormap-4188b0b5.js";import{W as _e}from"./WellborePathLayer-1c5716f9.js";import{g as et,a as tt,b as st,c as ot,d as it,e as nt,f as at,h as rt,i as lt,j as ct}from"./data-e45bb153.js";import"./_commonjsHelpers-28e086c5.js";import"./findsample-f4fa7ca8.js";const O=(a,e)=>{switch(e.lineType){case"wavy":return a.wavy(e);case"dashed":return a.dashed(e);case"solid":return a.solid(e);default:return Ne(e.lineType)}};class dt extends Be{constructor(){super(...arguments),this.yScale=null,this.xScale=null}onMount(e){super.onMount(e)}onUpdate(e){super.onUpdate(e),this.clearCanvas(),this.render()}onRescale(e){super.onRescale(e),this.yScale=e.yScale,this.xScale=e.xScale,this.resetTransform(),this.render()}drawDashed(e){const{ctx:t}=this,{canvas:s}=this,o=this.yScale(e.depth);t.save(),t.strokeStyle=e.color,this.setCtxLineStyle(t,e),this.setCtxLineWidth(t,e),t.beginPath(),t.moveTo(0,o),t.lineTo(s.width,o),t.stroke(),t.restore(),e.text&&this.drawText(t,e,t.canvas.width,o)}drawSolid(e){const{ctx:t}=this,{canvas:s}=this,o=this.yScale(e.depth);t.save(),t.strokeStyle=e.color,this.setCtxLineStyle(t,e),this.setCtxLineWidth(t,e),t.beginPath(),t.moveTo(0,o),t.lineTo(s.width,o),t.stroke(),t.restore(),e.text&&this.drawText(t,e,t.canvas.width,o)}drawWavy(e){const{ctx:i}=this,{canvas:r}=this,l=Fe(4,2.5,500,this.yScale),d=l*2,p=this.yScale(e.depth)-l,S=Math.ceil(r.width/d)+1,C=this.xScale(0)%d;i.save(),i.strokeStyle=e.color,this.setCtxLineStyle(i,e),this.setCtxLineWidth(i,e);for(let I=-1;I<S;I++)i.beginPath(),i.arc(I*d+C+l,p,l,0,Math.PI),i.stroke();i.restore(),e.text&&this.drawText(i,e,i.canvas.width,p)}drawText(e,t,s,o){const i=t.textColor||"#000",r=t.fontSize||"10px sans-serif",l=10;e.save(),e.strokeStyle=i,e.font=r,e.textAlign="end",e.textBaseline="bottom",e.fillText(t.text,s-l,o),e.restore()}setCtxLineStyle(e,t){O({solid:()=>{e.setLineDash([])},dashed:()=>{e.setLineDash([8,10])},wavy:()=>{e.setLineDash([])}},t)}setCtxLineWidth(e,t){e.lineWidth=t.lineWidth||1}render(){!this.ctx||!this.yScale||!this.xScale||requestAnimationFrame(()=>{var e;this.clearCanvas(),(e=this.data)==null||e.forEach(t=>{O({solid:s=>this.drawSolid(s),dashed:s=>this.drawDashed(s),wavy:s=>this.drawWavy(s)},t)})})}}const x=()=>Q({xBounds:[0,1e3],yBounds:[0,1e3]}),v=()=>Q({xBounds:[1e3,0],yBounds:[0,1e3]}),Q=a=>{const e={xLabel:"Displacement",yLabel:"TVD MSL",unitOfMeasure:"m"},t=700,s=600,o=Ge(t),i=u(t),r=u(t),l=u(t),d=u(t),p=Ve(t,s),S=[et(),tt(),st(),ot(),it(),nt(),at(),rt(),lt(),ct()];return Promise.all(S).then(C=>{var Z,R,F;const[I,X,k,A,D,J,K,$,q,_]=C,m=new E(I);m.offset=I[0][2];const ee=1e3/(m.displacement||1),te=((F=(R=(Z=A[0])==null?void 0:Z.data)==null?void 0:R.values)==null?void 0:F.length)||1,P=m.getTrajectory(te,0,1+ee),M=E.toDisplacement(P.points,P.offset),W=Te(M,D,A),se=Xe(k,M),oe=Ee(q,D),ie=He(oe),ne=new H({width:t,height:s}),ae=new H({width:t,height:s}),f=new Qe("grid",{majorColor:"black",minorColor:"gray",majorWidth:.5,minorWidth:.5,order:1,referenceSystem:m}),z=new Ue(ne,"geomodel",{order:2,layerOpacity:.6,data:W}),B=new _e("wellborepath",{order:3,strokeWidth:"2px",stroke:"red",referenceSystem:m}),N=new Ye("geomodellabels",{order:3,data:W}),w=new Je("seismic",{order:1}),re={completionSymbol1:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik0xMCAwSDkwVjEwMEgxMFYwWiIgZmlsbD0iI0Q5RDlEOSIvPgo8cGF0aCBkPSJNMCAyNUgxMFY3NUgwVjI1WiIgZmlsbD0iI0I1QjJCMiIvPgo8cGF0aCBkPSJNNDUgMjVINTVWNzVINDVWMjVaIiBmaWxsPSIjQjVCMkIyIi8+CjxwYXRoIGQ9Ik05MCAyNUgxMDBWNzVIOTBWMjVaIiBmaWxsPSIjQjVCMkIyIi8+Cjwvc3ZnPgo=",completionSymbol2:"tubing1.svg",completionSymbol3:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik0xMCAwSDkwVjEwMEgxMFYwWiIgZmlsbD0iI0Q5RDlEOSIvPgo8cGF0aCBkPSJNMCAyNUgxMFY3NUgwVjI1WiIgZmlsbD0iI0I1QjJCMiIvPgo8cGF0aCBkPSJNNDUgMjVINTVWNzVINDVWMjVaIiBmaWxsPSIjQjVCMkIyIi8+CjxwYXRoIGQ9Ik0yNSA2NUgzMFY4MEgyNVY2NVoiIGZpbGw9IiMzMTMxMzEiLz4KPHBhdGggZD0iTTI1IDQySDMwVjU3SDI1VjQyWiIgZmlsbD0iIzMxMzEzMSIvPgo8cGF0aCBkPSJNMjUgMjFIMzBWMzZIMjVWMjFaIiBmaWxsPSIjMzEzMTMxIi8+CjxwYXRoIGQ9Ik03MCA2NEg3NVY3OUg3MFY2NFoiIGZpbGw9IiMzMTMxMzEiLz4KPHBhdGggZD0iTTcwIDQxSDc1VjU2SDcwVjQxWiIgZmlsbD0iIzMxMzEzMSIvPgo8cGF0aCBkPSJNNzAgMjBINzVWMzVINzBWMjBaIiBmaWxsPSIjMzEzMTMxIi8+CjxwYXRoIGQ9Ik05MCAyNUgxMDBWNzVIOTBWMjVaIiBmaWxsPSIjQjVCMkIyIi8+Cjwvc3ZnPgo="},le=[{kind:"completionSymbol",id:"completion-svg-1",start:5250,end:5252,diameter:8.5,symbolKey:"completionSymbol1"},{kind:"completionSymbol",id:"completion-svg-2",start:5252,end:5274,diameter:8.5,symbolKey:"completionSymbol2"},{kind:"completionSymbol",id:"completion-svg-3",start:5274,end:5276,diameter:8.5,symbolKey:"completionSymbol3"}],ce={mechanicalPlug:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjEwMCIgaGVpZ2h0PSIxMDAiIHZpZXdCb3g9IjAgMCAxMDAgMTAwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNMSAxSDk5Vjk5SDFWMVoiIGZpbGw9InVybCgjcGFpbnQwX2xpbmVhcl81MF81KSIvPgo8cGF0aCBkPSJNMSAxSDk5Vjk5SDFWMVoiIGZpbGw9InVybCgjcGFpbnQxX2xpbmVhcl81MF81KSIgZmlsbC1vcGFjaXR5PSIwLjIiLz4KPHBhdGggZD0iTTEgMUg5OVY5OUgxVjFaIiBzdHJva2U9ImJsYWNrIiBzdHJva2Utd2lkdGg9IjIiLz4KPGxpbmUgeDE9IjEuNzEwNzIiIHkxPSIxLjI5NjUzIiB4Mj0iOTguNzEwNyIgeTI9Ijk5LjI5NjUiIHN0cm9rZT0iYmxhY2siIHN0cm9rZS13aWR0aD0iMiIvPgo8bGluZSB4MT0iOTguNzA3MSIgeTE9IjAuNzA3MTA3IiB4Mj0iMC43MDcxIiB5Mj0iOTguNzA3MSIgc3Ryb2tlPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIyIi8+CjxkZWZzPgo8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MF9saW5lYXJfNTBfNSIgeDE9IjAiIHkxPSI1MCIgeDI9IjUwIiB5Mj0iNTAiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KPHN0b3Agc3RvcC1jb2xvcj0iI0NDMjYyNiIvPgo8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNGRjQ3MUEiLz4KPC9saW5lYXJHcmFkaWVudD4KPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDFfbGluZWFyXzUwXzUiIHgxPSI1MCIgeTE9IjUwIiB4Mj0iMTAwIiB5Mj0iNTAiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KPHN0b3Agc3RvcC1jb2xvcj0iI0ZGNDcxQSIvPgo8c3RvcCBvZmZzZXQ9IjAuOTk5OSIgc3RvcC1jb2xvcj0iI0NDMjYyNiIvPgo8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNGRjQ3MUEiLz4KPC9saW5lYXJHcmFkaWVudD4KPC9kZWZzPgo8L3N2Zz4K"},de=[{kind:"pAndASymbol",id:"mechanical-plug-1",start:5100,end:5110,diameter:8.5,symbolKey:"mechanicalPlug"},{kind:"cementPlug",id:"cement-plug-2",start:5e3,end:5110,referenceIds:["casing-07"]}],pe=[{kind:"perforation",subKind:"Perforation",id:"PerforationDemo1",start:4e3,end:4500,isOpen:!0},{kind:"perforation",subKind:"Cased hole frac pack",id:"PerforationDemo2",start:3500,end:4500,isOpen:!0}],me={holeSizes:K,cements:$,casings:J,completion:[...X,...le],pAndA:[...de,..._],perforations:pe,symbols:{...re,...ce}},h={holeLayerId:"hole-id",casingLayerId:"casing-id",completionLayerId:"completion-id",cementLayerId:"cement-id",pAndALayerId:"pAndA-id",perforationLayerId:"perforation-id"},ye={order:5,referenceSystem:m,internalLayerOptions:h,data:me},G=new Ze(ae,"schematic-webgl-layer",ye),he=[{text:"RKB",lineType:"dashed",color:"black",depth:0},{text:"MSL",lineType:"wavy",color:"blue",depth:30},{text:"Seabed",lineType:"solid",color:"slategray",depth:91.1,lineWidth:2}],V=new dt("sea-and-rkb-layer",{data:he}),T=new Oe("callout",{order:100,data:ie,referenceSystem:m}),Ie=[f,z,B,N,w,G,V,T],ge={scaleOptions:a,axisOptions:e,container:p,referenceSystem:m},n=new ze({layers:Ie,...ge});pt(n);const be=Ke(se);$e(k,M,qe).then(c=>{w.setData({image:c,options:be})}),n.adjustToSize(t,s),n.setViewport(1e3,1500,5e3),n.zoomPanHandler.zFactor=1;const ue=Re(),xe=y(n,f,"Grid"),Se=y(n,B,"Wellbore"),Ce=y(n,z,"Geo model"),Me=y(n,G,"Schematic"),we=y(n,V,"SeaAndRKB"),je=y(n,N,"Geo model labels"),Le=y(n,w,"Seismic"),ve=y(n,T,"Picks"),ke=[["Holes",h.holeLayerId],["Casings",h.casingLayerId],["Cement",h.cementLayerId],["Completion",h.completionLayerId],["Plug & Abandonment",h.pAndALayerId],["Perforations",h.perforationLayerId]].map(([c,L])=>mt(n,L,c));let j=!0;const Ae=b("Axis labels",c=>{j?(n.hideAxisLabels(),c.style.backgroundColor="red",c.style.color="white",j=!1):(n.showAxisLabels(),j=!0,c.style.backgroundColor="lightblue",c.style.color="")},"background: lightblue;"),De=b("800x600",()=>{p.setAttribute("style",`height: ${600}px; width: ${800}px;background-color: #eee;`),o.style.width=`${800}px`,r.style.width=`${800}px`,i.style.width=`${800}px`,n.adjustToSize(800,600)}),Pe=b("600x400",()=>{p.setAttribute("style",`height: ${400}px; width: ${600}px;background-color: #eee;`),o.style.width=`${600}px`,r.style.width=`${600}px`,i.style.width=`${600}px`,n.adjustToSize(600,400)}),We=b("Default",()=>{p.setAttribute("style",`height: ${s}px; width: ${t}px;background-color: #eee;`),o.style.width=`${t}px`,r.style.width=`${t}px`,i.style.width=`${t}px`,n.adjustToSize(t,s)}),fe=b("Clear everything",()=>{n.clearAllData()});i.appendChild(xe),i.appendChild(Se),i.appendChild(Ce),i.appendChild(je),i.appendChild(Le),i.appendChild(Me),i.appendChild(we),i.appendChild(ve),i.appendChild(Ae),r.appendChild(De),r.appendChild(Pe),r.appendChild(We),d.appendChild(fe),ke.forEach(c=>l.appendChild(c)),o.appendChild(g("A complete example of multiple layers comprised of SVG, Canvas, HTML and pixi.js (WebGL). We use a controller to update and display each layer in a container (just a plain div element) on top of each other.")),o.appendChild(p),o.appendChild(g("Toggle")),o.appendChild(i),o.appendChild(g("Schematic toggle")),o.appendChild(l),o.appendChild(g("Adjust size")),o.appendChild(r),o.appendChild(g("Miscellaneous")),o.appendChild(d),o.appendChild(ue)}),o};function pt(a){const e=a.overlay.create("md",{onMouseMove:t=>{const{target:s,caller:o,x:i}=t,r=o.currentStateAsEvent.xScale.invert(i),{referenceSystem:l}=o,d=l.unproject(r);s.textContent=Number.isFinite(d)?`MD: ${d.toFixed(1)}`:"-",d<0||l.length<d?s.style.visibility="hidden":s.style.visibility="visible"},onMouseExit:t=>{t.target.style.visibility="hidden"}});e.style.visibility="hidden",e.style.display="inline-block",e.style.padding="2px",e.style.borderRadius="4px",e.style.textAlign="right",e.style.position="absolute",e.style.backgroundColor="rgba(0,0,0,0.5)",e.style.color="white",e.style.right="5px",e.style.bottom="5px",e.style.zIndex="100"}const y=(a,e,t)=>{const s=document.createElement("button");s.innerHTML=`${t}`,s.setAttribute("style","width: 170px;height:32px;margin-top:12px;background: lightblue;");let o=!1;return s.onclick=()=>{o?(a.showLayer(e.id),s.style.backgroundColor="lightblue",s.style.color=""):(a.hideLayer(e.id),s.style.backgroundColor="red",s.style.color="white"),o=!o},s},mt=(a,e,t)=>{const s=document.createElement("button");s.innerHTML=`${t}`,s.setAttribute("style","width: 170px;height:32px;margin-top:12px;background: lightblue;");let o=!1;return s.onclick=()=>{o?(a.showLayer(e),s.style.backgroundColor="lightblue",s.style.color=""):(a.hideLayer(e),s.style.backgroundColor="red",s.style.color="white"),o=!o},s};function b(a,e,t=""){const s=document.createElement("button");return s.innerHTML=a,s.setAttribute("style",`${t}width: 170px;height:32px;margin-top:12px;`),s.onclick=()=>e(s),s}const jt={title:"ESV Intersection/Complete example",component:x};var U;x.parameters={...x.parameters,storySource:{source:`() => {
  const xBounds: [number, number] = [0, 1000];
  const yBounds: [number, number] = [0, 1000];
  const scaleOptions = {
    xBounds,
    yBounds
  };
  return renderIntersection(scaleOptions);
}`,...(U=x.parameters)==null?void 0:U.storySource}};var Y;v.parameters={...v.parameters,storySource:{source:`() => {
  const xBounds: [number, number] = [1000, 0];
  const yBounds: [number, number] = [0, 1000];
  const scaleOptions = {
    xBounds,
    yBounds
  };
  return renderIntersection(scaleOptions);
}`,...(Y=v.parameters)==null?void 0:Y.storySource}};const Lt=["intersection","intersectionFlipX"];export{Lt as __namedExportsOrder,jt as default,x as intersection,v as intersectionFlipX};
//# sourceMappingURL=intersection.stories-e07ef029.js.map
