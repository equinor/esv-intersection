{"version":3,"file":"highlight.stories-06ebffaf.js","sources":["../../../../src/layers/base/HTMLLayer.ts"],"sourcesContent":["import { select, Selection } from 'd3-selection';\nimport { Layer } from './Layer';\nimport { OnMountEvent, OnResizeEvent } from '../../interfaces';\nimport { DEFAULT_LAYER_HEIGHT, DEFAULT_LAYER_WIDTH } from '../../constants';\n\nexport abstract class HTMLLayer<T> extends Layer<T> {\n  elm: Selection<HTMLElement, unknown, null, undefined>;\n\n  onMount(event: OnMountEvent): void {\n    super.onMount(event);\n    const { elm } = event;\n    const width = event.width || parseInt(elm.getAttribute('width'), 10) || DEFAULT_LAYER_WIDTH;\n    const height = event.height || parseInt(elm.getAttribute('height'), 10) || DEFAULT_LAYER_HEIGHT;\n\n    if (!this.elm) {\n      this.elm = select(elm).append('div');\n      this.elm.attr('id', `${this.id}`);\n      this.elm.attr('class', 'html-layer');\n    }\n    const interactive = this.interactive ? 'auto' : 'none';\n    this.elm\n      .style('position', 'absolute')\n      .style('height', `${height}px`)\n      .style('width', `${width}px`)\n      .style('opacity', this.opacity)\n      .style('overflow', 'hidden')\n      .style('pointer-events', interactive)\n      .style('z-index', this.order);\n  }\n\n  onUnmount(): void {\n    super.onUnmount();\n    this.elm.remove();\n    this.elm = null;\n  }\n\n  onResize(event: OnResizeEvent): void {\n    if (!this.elm) {\n      return;\n    }\n    super.onResize(event);\n    this.elm.style('height', `${event.height}px`).style('width', `${event.width}px`);\n  }\n\n  setVisibility(visible: boolean): void {\n    super.setVisibility(visible);\n    if (this.elm) {\n      this.elm.attr('visibility', visible ? 'visible' : 'hidden');\n    }\n  }\n\n  onOpacityChanged(opacity: number): void {\n    if (this.elm) {\n      this.elm.style('opacity', opacity);\n    }\n  }\n\n  onOrderChanged(order: number): void {\n    if (this.elm) {\n      this.elm.style('z-index', order);\n    }\n  }\n\n  onInteractivityChanged(shouldBeInteractive: boolean): void {\n    if (this.elm) {\n      const interactive = shouldBeInteractive ? 'auto' : 'none';\n      this.elm.style('pointer-events', interactive);\n    }\n  }\n}\n"],"names":["HTMLLayer","Layer","event","elm","width","DEFAULT_LAYER_WIDTH","height","DEFAULT_LAYER_HEIGHT","select","interactive","visible","opacity","order","shouldBeInteractive"],"mappings":"sTAKO,MAAeA,UAAqBC,CAAS,CAGlD,QAAQC,EAA2B,CACjC,MAAM,QAAQA,CAAK,EACb,KAAA,CAAE,IAAAC,CAAQ,EAAAD,EACVE,EAAQF,EAAM,OAAS,SAASC,EAAI,aAAa,OAAO,EAAG,EAAE,GAAKE,EAClEC,EAASJ,EAAM,QAAU,SAASC,EAAI,aAAa,QAAQ,EAAG,EAAE,GAAKI,EAEtE,KAAK,MACR,KAAK,IAAMC,EAAOL,CAAG,EAAE,OAAO,KAAK,EACnC,KAAK,IAAI,KAAK,KAAM,GAAG,KAAK,IAAI,EAC3B,KAAA,IAAI,KAAK,QAAS,YAAY,GAE/B,MAAAM,EAAc,KAAK,YAAc,OAAS,OAChD,KAAK,IACF,MAAM,WAAY,UAAU,EAC5B,MAAM,SAAU,GAAGH,KAAU,EAC7B,MAAM,QAAS,GAAGF,KAAS,EAC3B,MAAM,UAAW,KAAK,OAAO,EAC7B,MAAM,WAAY,QAAQ,EAC1B,MAAM,iBAAkBK,CAAW,EACnC,MAAM,UAAW,KAAK,KAAK,CAChC,CAEA,WAAkB,CAChB,MAAM,UAAU,EAChB,KAAK,IAAI,SACT,KAAK,IAAM,IACb,CAEA,SAASP,EAA4B,CAC9B,KAAK,MAGV,MAAM,SAASA,CAAK,EACf,KAAA,IAAI,MAAM,SAAU,GAAGA,EAAM,UAAU,EAAE,MAAM,QAAS,GAAGA,EAAM,SAAS,EACjF,CAEA,cAAcQ,EAAwB,CACpC,MAAM,cAAcA,CAAO,EACvB,KAAK,KACP,KAAK,IAAI,KAAK,aAAcA,EAAU,UAAY,QAAQ,CAE9D,CAEA,iBAAiBC,EAAuB,CAClC,KAAK,KACF,KAAA,IAAI,MAAM,UAAWA,CAAO,CAErC,CAEA,eAAeC,EAAqB,CAC9B,KAAK,KACF,KAAA,IAAI,MAAM,UAAWA,CAAK,CAEnC,CAEA,uBAAuBC,EAAoC,CACzD,GAAI,KAAK,IAAK,CACN,MAAAJ,EAAcI,EAAsB,OAAS,OAC9C,KAAA,IAAI,MAAM,iBAAkBJ,CAAW,CAC9C,CACF,CACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}